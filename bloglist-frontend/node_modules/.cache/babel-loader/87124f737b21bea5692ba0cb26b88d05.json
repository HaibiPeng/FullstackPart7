{"ast":null,"code":"import blogService from '../services/blogs';\nimport loginService from '../services/login';\nimport signupService from '../services/signup';\n\nconst userReducer = (state = {}, action) => {\n  switch (action.type) {\n    case 'SET_TOKEN':\n      return action.user;\n\n    case 'GET_TOKEN':\n      return action.user;\n\n    case 'REMOVE_TOKEN':\n      return null;\n\n    case 'SIGN_UP':\n      return action.user;\n\n    default:\n      return state;\n  }\n};\n\nexport const saveToken = (username, password) => {\n  return async dispatch => {\n    const user = await loginService.login({\n      username,\n      password\n    });\n    window.localStorage.setItem('loggedBlogappUser', JSON.stringify(user));\n    blogService.setToken(user.token);\n    dispatch({\n      type: 'SET_TOKEN',\n      user: user\n    });\n  };\n};\nexport const getToken = () => {\n  return async dispatch => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser');\n    let user = null;\n\n    if (loggedUserJSON) {\n      user = JSON.parse(loggedUserJSON);\n      blogService.setToken(user.token);\n    }\n\n    dispatch({\n      type: 'GET_TOKEN',\n      user: user\n    });\n  };\n};\nexport const removeToken = () => {\n  return async dispatch => {\n    window.localStorage.removeItem('loggedBlogappUser');\n    blogService.setToken(null);\n    dispatch({\n      type: 'REMOVE_TOKEN'\n    });\n  };\n};\nexport const signUp = (username, name, password, checkpassword) => {\n  return async dispatch => {\n    const user = await signupService.signup({\n      username,\n      name,\n      password,\n      checkpassword\n    });\n    window.localStorage.setItem('loggedBlogappUser', JSON.stringify(user));\n    blogService.setToken(user.token);\n    dispatch({\n      type: 'SET_TOKEN',\n      user: user\n    });\n  };\n};\nexport default userReducer;","map":{"version":3,"sources":["/Users/jdszsl/Desktop/Aalto/Aalto-CommunicationsEngineering/CS-E4670FullStackWebDevelopmentD/part7/bloglist-frontend/src/reducers/userReducer.js"],"names":["blogService","loginService","signupService","userReducer","state","action","type","user","saveToken","username","password","dispatch","login","window","localStorage","setItem","JSON","stringify","setToken","token","getToken","loggedUserJSON","getItem","parse","removeToken","removeItem","signUp","name","checkpassword","signup"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,mBAAxB;AACA,OAAOC,YAAP,MAAyB,mBAAzB;AACA,OAAOC,aAAP,MAA0B,oBAA1B;;AAEA,MAAMC,WAAW,GAAG,CAACC,KAAK,GAAG,EAAT,EAAaC,MAAb,KAAwB;AAC1C,UAAQA,MAAM,CAACC,IAAf;AACA,SAAK,WAAL;AACE,aAAOD,MAAM,CAACE,IAAd;;AACF,SAAK,WAAL;AACE,aAAOF,MAAM,CAACE,IAAd;;AACF,SAAK,cAAL;AACE,aAAO,IAAP;;AACF,SAAK,SAAL;AACE,aAAOF,MAAM,CAACE,IAAd;;AACF;AACE,aAAOH,KAAP;AAVF;AAYD,CAbD;;AAeA,OAAO,MAAMI,SAAS,GAAG,CAACC,QAAD,EAAWC,QAAX,KAAwB;AAC/C,SAAO,MAAMC,QAAN,IAAkB;AACvB,UAAMJ,IAAI,GAAG,MAAMN,YAAY,CAACW,KAAb,CAAmB;AACpCH,MAAAA,QADoC;AAC1BC,MAAAA;AAD0B,KAAnB,CAAnB;AAGAG,IAAAA,MAAM,CAACC,YAAP,CAAoBC,OAApB,CACE,mBADF,EACuBC,IAAI,CAACC,SAAL,CAAeV,IAAf,CADvB;AAGAP,IAAAA,WAAW,CAACkB,QAAZ,CAAqBX,IAAI,CAACY,KAA1B;AACAR,IAAAA,QAAQ,CAAC;AACPL,MAAAA,IAAI,EAAE,WADC;AAEPC,MAAAA,IAAI,EAAEA;AAFC,KAAD,CAAR;AAID,GAZD;AAaD,CAdM;AAgBP,OAAO,MAAMa,QAAQ,GAAG,MAAM;AAC5B,SAAO,MAAMT,QAAN,IAAkB;AACvB,UAAMU,cAAc,GAAGR,MAAM,CAACC,YAAP,CAAoBQ,OAApB,CAA4B,mBAA5B,CAAvB;AACA,QAAIf,IAAI,GAAG,IAAX;;AACA,QAAIc,cAAJ,EAAoB;AAClBd,MAAAA,IAAI,GAAGS,IAAI,CAACO,KAAL,CAAWF,cAAX,CAAP;AACArB,MAAAA,WAAW,CAACkB,QAAZ,CAAqBX,IAAI,CAACY,KAA1B;AACD;;AACDR,IAAAA,QAAQ,CAAC;AACPL,MAAAA,IAAI,EAAE,WADC;AAEPC,MAAAA,IAAI,EAAEA;AAFC,KAAD,CAAR;AAID,GAXD;AAYD,CAbM;AAgBP,OAAO,MAAMiB,WAAW,GAAG,MAAM;AAC/B,SAAO,MAAMb,QAAN,IAAkB;AACvBE,IAAAA,MAAM,CAACC,YAAP,CAAoBW,UAApB,CAA+B,mBAA/B;AACAzB,IAAAA,WAAW,CAACkB,QAAZ,CAAqB,IAArB;AACAP,IAAAA,QAAQ,CAAC;AACPL,MAAAA,IAAI,EAAE;AADC,KAAD,CAAR;AAGD,GAND;AAOD,CARM;AAUP,OAAO,MAAMoB,MAAM,GAAG,CAACjB,QAAD,EAAWkB,IAAX,EAAiBjB,QAAjB,EAA2BkB,aAA3B,KAA6C;AACjE,SAAO,MAAMjB,QAAN,IAAkB;AACvB,UAAMJ,IAAI,GAAG,MAAML,aAAa,CAAC2B,MAAd,CAAqB;AACtCpB,MAAAA,QADsC;AAC5BkB,MAAAA,IAD4B;AACtBjB,MAAAA,QADsB;AACZkB,MAAAA;AADY,KAArB,CAAnB;AAGAf,IAAAA,MAAM,CAACC,YAAP,CAAoBC,OAApB,CACE,mBADF,EACuBC,IAAI,CAACC,SAAL,CAAeV,IAAf,CADvB;AAGAP,IAAAA,WAAW,CAACkB,QAAZ,CAAqBX,IAAI,CAACY,KAA1B;AACAR,IAAAA,QAAQ,CAAC;AACPL,MAAAA,IAAI,EAAE,WADC;AAEPC,MAAAA,IAAI,EAAEA;AAFC,KAAD,CAAR;AAID,GAZD;AAaD,CAdM;AAgBP,eAAeJ,WAAf","sourcesContent":["import blogService from '../services/blogs'\nimport loginService from '../services/login'\nimport signupService from '../services/signup'\n\nconst userReducer = (state = {}, action) => {\n  switch (action.type) {\n  case 'SET_TOKEN':\n    return action.user\n  case 'GET_TOKEN':\n    return action.user\n  case 'REMOVE_TOKEN':\n    return null\n  case 'SIGN_UP':\n    return action.user\n  default:\n    return state\n  }\n}\n\nexport const saveToken = (username, password) => {\n  return async dispatch => {\n    const user = await loginService.login({\n      username, password\n    })\n    window.localStorage.setItem(\n      'loggedBlogappUser', JSON.stringify(user)\n    )\n    blogService.setToken(user.token)\n    dispatch({\n      type: 'SET_TOKEN',\n      user: user\n    })\n  }\n}\n\nexport const getToken = () => {\n  return async dispatch => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser')\n    let user = null\n    if (loggedUserJSON) {\n      user = JSON.parse(loggedUserJSON)\n      blogService.setToken(user.token)\n    }\n    dispatch({\n      type: 'GET_TOKEN',\n      user: user\n    })\n  }\n}\n\n\nexport const removeToken = () => {\n  return async dispatch => {\n    window.localStorage.removeItem('loggedBlogappUser')\n    blogService.setToken(null)\n    dispatch({\n      type: 'REMOVE_TOKEN',\n    })\n  }\n}\n\nexport const signUp = (username, name, password, checkpassword) => {\n  return async dispatch => {\n    const user = await signupService.signup({\n      username, name, password, checkpassword\n    })\n    window.localStorage.setItem(\n      'loggedBlogappUser', JSON.stringify(user)\n    )\n    blogService.setToken(user.token)\n    dispatch({\n      type: 'SET_TOKEN',\n      user: user\n    })\n  }\n}\n\nexport default userReducer\n"]},"metadata":{},"sourceType":"module"}