{"ast":null,"code":"import blogService from '../services/blogs';\nimport loginService from '../services/login';\nimport signupService from '../services/signup';\n\nconst userReducer = (state = {}, action) => {\n  switch (action.type) {\n    case 'SET_TOKEN':\n      return action.user;\n\n    case 'GET_TOKEN':\n      return action.user;\n\n    case 'REMOVE_TOKEN':\n      return null;\n\n    case 'SIGN_UP':\n      return action.data;\n\n    default:\n      return state;\n  }\n};\n\nexport const saveToken = (username, password) => {\n  return async dispatch => {\n    const user = await loginService.login({\n      username,\n      password\n    });\n    window.localStorage.setItem('loggedBlogappUser', JSON.stringify(user));\n    blogService.setToken(user.token);\n    dispatch({\n      type: 'SET_TOKEN',\n      user: user\n    });\n  };\n};\nexport const getToken = () => {\n  return async dispatch => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser');\n    let user = null;\n\n    if (loggedUserJSON) {\n      user = JSON.parse(loggedUserJSON);\n      blogService.setToken(user.token);\n    }\n\n    dispatch({\n      type: 'GET_TOKEN',\n      user: user\n    });\n  };\n};\nexport const removeToken = () => {\n  return async dispatch => {\n    window.localStorage.removeItem('loggedBlogappUser');\n    blogService.setToken(null);\n    dispatch({\n      type: 'REMOVE_TOKEN'\n    });\n  };\n};\nexport const signUp = (username, name, password) => {\n  return async dispatch => {\n    const msg = await signupService.signup({\n      username,\n      name,\n      password\n    });\n    console.log(msg);\n    dispatch({\n      type: 'SIGN_UP',\n      data: msg\n    });\n  };\n};\nexport default userReducer;","map":{"version":3,"sources":["/Users/jdszsl/Desktop/Aalto/Aalto-CommunicationsEngineering/CS-E4670FullStackWebDevelopmentD/part7/bloglist-frontend/src/reducers/userReducer.js"],"names":["blogService","loginService","signupService","userReducer","state","action","type","user","data","saveToken","username","password","dispatch","login","window","localStorage","setItem","JSON","stringify","setToken","token","getToken","loggedUserJSON","getItem","parse","removeToken","removeItem","signUp","name","msg","signup","console","log"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,mBAAxB;AACA,OAAOC,YAAP,MAAyB,mBAAzB;AACA,OAAOC,aAAP,MAA0B,oBAA1B;;AAEA,MAAMC,WAAW,GAAG,CAACC,KAAK,GAAG,EAAT,EAAaC,MAAb,KAAwB;AAC1C,UAAQA,MAAM,CAACC,IAAf;AACA,SAAK,WAAL;AACE,aAAOD,MAAM,CAACE,IAAd;;AACF,SAAK,WAAL;AACE,aAAOF,MAAM,CAACE,IAAd;;AACF,SAAK,cAAL;AACE,aAAO,IAAP;;AACF,SAAK,SAAL;AACE,aAAOF,MAAM,CAACG,IAAd;;AACF;AACE,aAAOJ,KAAP;AAVF;AAYD,CAbD;;AAeA,OAAO,MAAMK,SAAS,GAAG,CAACC,QAAD,EAAWC,QAAX,KAAwB;AAC/C,SAAO,MAAMC,QAAN,IAAkB;AACvB,UAAML,IAAI,GAAG,MAAMN,YAAY,CAACY,KAAb,CAAmB;AACpCH,MAAAA,QADoC;AAC1BC,MAAAA;AAD0B,KAAnB,CAAnB;AAGAG,IAAAA,MAAM,CAACC,YAAP,CAAoBC,OAApB,CACE,mBADF,EACuBC,IAAI,CAACC,SAAL,CAAeX,IAAf,CADvB;AAGAP,IAAAA,WAAW,CAACmB,QAAZ,CAAqBZ,IAAI,CAACa,KAA1B;AACAR,IAAAA,QAAQ,CAAC;AACPN,MAAAA,IAAI,EAAE,WADC;AAEPC,MAAAA,IAAI,EAAEA;AAFC,KAAD,CAAR;AAID,GAZD;AAaD,CAdM;AAgBP,OAAO,MAAMc,QAAQ,GAAG,MAAM;AAC5B,SAAO,MAAMT,QAAN,IAAkB;AACvB,UAAMU,cAAc,GAAGR,MAAM,CAACC,YAAP,CAAoBQ,OAApB,CAA4B,mBAA5B,CAAvB;AACA,QAAIhB,IAAI,GAAG,IAAX;;AACA,QAAIe,cAAJ,EAAoB;AAClBf,MAAAA,IAAI,GAAGU,IAAI,CAACO,KAAL,CAAWF,cAAX,CAAP;AACAtB,MAAAA,WAAW,CAACmB,QAAZ,CAAqBZ,IAAI,CAACa,KAA1B;AACD;;AACDR,IAAAA,QAAQ,CAAC;AACPN,MAAAA,IAAI,EAAE,WADC;AAEPC,MAAAA,IAAI,EAAEA;AAFC,KAAD,CAAR;AAID,GAXD;AAYD,CAbM;AAgBP,OAAO,MAAMkB,WAAW,GAAG,MAAM;AAC/B,SAAO,MAAMb,QAAN,IAAkB;AACvBE,IAAAA,MAAM,CAACC,YAAP,CAAoBW,UAApB,CAA+B,mBAA/B;AACA1B,IAAAA,WAAW,CAACmB,QAAZ,CAAqB,IAArB;AACAP,IAAAA,QAAQ,CAAC;AACPN,MAAAA,IAAI,EAAE;AADC,KAAD,CAAR;AAGD,GAND;AAOD,CARM;AAUP,OAAO,MAAMqB,MAAM,GAAG,CAACjB,QAAD,EAAWkB,IAAX,EAAiBjB,QAAjB,KAA8B;AAClD,SAAO,MAAMC,QAAN,IAAkB;AACvB,UAAMiB,GAAG,GAAG,MAAM3B,aAAa,CAAC4B,MAAd,CAAqB;AACrCpB,MAAAA,QADqC;AAC3BkB,MAAAA,IAD2B;AACrBjB,MAAAA;AADqB,KAArB,CAAlB;AAGAoB,IAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACAjB,IAAAA,QAAQ,CAAC;AACPN,MAAAA,IAAI,EAAE,SADC;AAEPE,MAAAA,IAAI,EAAEqB;AAFC,KAAD,CAAR;AAID,GATD;AAUD,CAXM;AAaP,eAAe1B,WAAf","sourcesContent":["import blogService from '../services/blogs'\nimport loginService from '../services/login'\nimport signupService from '../services/signup'\n\nconst userReducer = (state = {}, action) => {\n  switch (action.type) {\n  case 'SET_TOKEN':\n    return action.user\n  case 'GET_TOKEN':\n    return action.user\n  case 'REMOVE_TOKEN':\n    return null\n  case 'SIGN_UP':\n    return action.data\n  default:\n    return state\n  }\n}\n\nexport const saveToken = (username, password) => {\n  return async dispatch => {\n    const user = await loginService.login({\n      username, password\n    })\n    window.localStorage.setItem(\n      'loggedBlogappUser', JSON.stringify(user)\n    )\n    blogService.setToken(user.token)\n    dispatch({\n      type: 'SET_TOKEN',\n      user: user\n    })\n  }\n}\n\nexport const getToken = () => {\n  return async dispatch => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser')\n    let user = null\n    if (loggedUserJSON) {\n      user = JSON.parse(loggedUserJSON)\n      blogService.setToken(user.token)\n    }\n    dispatch({\n      type: 'GET_TOKEN',\n      user: user\n    })\n  }\n}\n\n\nexport const removeToken = () => {\n  return async dispatch => {\n    window.localStorage.removeItem('loggedBlogappUser')\n    blogService.setToken(null)\n    dispatch({\n      type: 'REMOVE_TOKEN',\n    })\n  }\n}\n\nexport const signUp = (username, name, password) => {\n  return async dispatch => {\n    const msg = await signupService.signup({\n      username, name, password\n    })\n    console.log(msg)\n    dispatch({\n      type: 'SIGN_UP',\n      data: msg\n    })\n  }\n}\n\nexport default userReducer\n"]},"metadata":{},"sourceType":"module"}